{"ast":null,"code":"var _jsxFileName = \"/home/rodas/catkin_ws/src/autoROS/src/roscar_server/src/App.js\";\nimport { useAnimationFrame } from \"@cruise-automation/hooks\";\nimport React, { useState } from \"react\";\nimport ROSLIB from \"roslib\";\nimport Worldview, { Text, Lines, Cubes, Grid, Axes } from \"regl-worldview\";\nlet anchor0pos = {\n  id: \"anchor0\",\n  x: 0,\n  y: 0\n};\nlet anchor1pos = {\n  id: \"anchor1\",\n  x: 10,\n  y: 0\n};\nlet anchor2pos = {\n  id: \"anchor2\",\n  x: 10,\n  y: 10\n};\nlet anchor3pos = {\n  id: \"anchor3\",\n  x: 0,\n  y: 10\n};\nlet tagpos = {\n  x: 5,\n  y: 5\n};\nlet tagOrientation = {\n  x: 0,\n  y: 0,\n  z: 0,\n  w: 0\n};\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  const validatedCount = isNaN(count) || count < 1 ? 6 : Math.round(count);\n  useAnimationFrame(() => {\n    // update count before each browser repaint\n    const newCount = count + 1;\n    setCount(newCount);\n  }, false, []); // lines\n\n  const lines = [{\n    pose: {\n      position: {\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 0\n      }\n    },\n    scale: {\n      x: 0.1,\n      y: 0.1,\n      z: 0.1\n    },\n    color: {\n      r: 0,\n      g: 1,\n      b: 0,\n      a: 1\n    },\n    points: [{\n      x: anchor0pos.x,\n      y: anchor0pos.y,\n      z: 0\n    }, {\n      x: tagpos.x,\n      y: tagpos.y,\n      z: 0\n    }],\n    colors: []\n  }, {\n    pose: {\n      position: {\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 0\n      }\n    },\n    scale: {\n      x: 0.1,\n      y: 0.1,\n      z: 0.1\n    },\n    color: {\n      r: 0,\n      g: 1,\n      b: 0,\n      a: 1\n    },\n    points: [{\n      x: anchor1pos.x,\n      y: anchor1pos.y,\n      z: 0\n    }, {\n      x: tagpos.x,\n      y: tagpos.y,\n      z: 0\n    }],\n    colors: []\n  }, {\n    pose: {\n      position: {\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 0\n      }\n    },\n    scale: {\n      x: 0.1,\n      y: 0.1,\n      z: 0.1\n    },\n    color: {\n      r: 0,\n      g: 1,\n      b: 0,\n      a: 1\n    },\n    points: [{\n      x: anchor2pos.x,\n      y: anchor2pos.y,\n      z: 0\n    }, {\n      x: tagpos.x,\n      y: tagpos.y,\n      z: 0\n    }],\n    colors: []\n  }, {\n    pose: {\n      position: {\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 0\n      }\n    },\n    scale: {\n      x: 0.1,\n      y: 0.1,\n      z: 0.1\n    },\n    color: {\n      r: 0,\n      g: 1,\n      b: 0,\n      a: 1\n    },\n    points: [{\n      x: anchor3pos.x,\n      y: anchor3pos.y,\n      z: 0\n    }, {\n      x: tagpos.x,\n      y: tagpos.y,\n      z: 0\n    }],\n    colors: []\n  }];\n  const labelMarkers = [{\n    name: anchor0pos.id,\n    text: anchor0pos.id,\n    color: {\n      r: 1,\n      g: 1,\n      b: 1,\n      a: 1\n    },\n    pose: {\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      },\n      position: {\n        x: anchor0pos.x,\n        y: anchor0pos.y,\n        z: 0,\n        w: 1\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    } // uncomment colors and remove autoBackgroundColor prop to set text and background colors\n    // colors: [{ r: 1, g: 1, b: 1, a: 1 }, { r: 1, g: 0, b: 0, a: 0.8 }],\n\n  }, {\n    name: anchor1pos.id,\n    text: anchor1pos.id,\n    color: {\n      r: 1,\n      g: 1,\n      b: 1,\n      a: 1\n    },\n    pose: {\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      },\n      position: {\n        x: anchor1pos.x,\n        y: anchor1pos.y,\n        z: 0,\n        w: 1\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    } // uncomment colors and remove autoBackgroundColor prop to set text and background colors\n    // colors: [{ r: 1, g: 1, b: 1, a: 1 }, { r: 1, g: 0, b: 0, a: 0.8 }],\n\n  }, {\n    name: anchor2pos.id,\n    text: anchor2pos.id,\n    color: {\n      r: 1,\n      g: 1,\n      b: 1,\n      a: 1\n    },\n    pose: {\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      },\n      position: {\n        x: anchor2pos.x,\n        y: anchor2pos.y,\n        z: 0,\n        w: 1\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    } // uncomment colors and remove autoBackgroundColor prop to set text and background colors\n    // colors: [{ r: 1, g: 1, b: 1, a: 1 }, { r: 1, g: 0, b: 0, a: 0.8 }],\n\n  }, {\n    name: anchor3pos.id,\n    text: anchor3pos.id,\n    color: {\n      r: 1,\n      g: 1,\n      b: 1,\n      a: 1\n    },\n    pose: {\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      },\n      position: {\n        x: anchor3pos.x,\n        y: anchor3pos.y,\n        z: 0,\n        w: 1\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    } // uncomment colors and remove autoBackgroundColor prop to set text and background colors\n    // colors: [{ r: 1, g: 1, b: 1, a: 1 }, { r: 1, g: 0, b: 0, a: 0.8 }],\n\n  }];\n  return React.createElement(Worldview, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    count: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }), React.createElement(Axes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }), React.createElement(Lines, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, lines), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, labelMarkers), React.createElement(Cubes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, [{\n    pose: {\n      orientation: {\n        x: tagOrientation.x,\n        y: 0,\n        z: tagOrientation.z,\n        w: tagOrientation.w\n      },\n      // position the cube at the center\n      position: {\n        x: tagpos.x,\n        y: tagpos.y,\n        z: 0\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    },\n    // rgba values are between 0 and 1 (inclusive)\n    color: {\n      r: 1,\n      g: 0,\n      b: 0,\n      a: 1\n    }\n  }]), React.createElement(Cubes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, [{\n    pose: {\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      },\n      // position the cube at the center\n      position: {\n        x: anchor0pos.x,\n        y: anchor0pos.y,\n        z: 0\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    },\n    // rgba values are between 0 and 1 (inclusive)\n    color: {\n      r: 0,\n      g: 1,\n      b: 0,\n      a: 1\n    }\n  }]), React.createElement(Cubes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, [{\n    pose: {\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      },\n      // position the cube at the center\n      position: {\n        x: anchor1pos.x,\n        y: anchor1pos.y,\n        z: 0\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    },\n    // rgba values are between 0 and 1 (inclusive)\n    color: {\n      r: 0,\n      g: 1,\n      b: 0,\n      a: 1\n    }\n  }]), React.createElement(Cubes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, [{\n    pose: {\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      },\n      // position the cube at the center\n      position: {\n        x: anchor2pos.x,\n        y: anchor2pos.y,\n        z: 0\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    },\n    // rgba values are between 0 and 1 (inclusive)\n    color: {\n      r: 0,\n      g: 1,\n      b: 0,\n      a: 1\n    }\n  }]), React.createElement(Cubes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, [{\n    pose: {\n      orientation: {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      },\n      // position the cube at the center\n      position: {\n        x: anchor3pos.x,\n        y: anchor3pos.y,\n        z: 0\n      }\n    },\n    scale: {\n      x: 1,\n      y: 1,\n      z: 1\n    },\n    // rgba values are between 0 and 1 (inclusive)\n    color: {\n      r: 0,\n      g: 1,\n      b: 0,\n      a: 1\n    }\n  }]), React.createElement(\"div\", {\n    style: {\n      position: \"absolute\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      padding: 8,\n      left: 0,\n      top: 0,\n      right: 0,\n      maxWidth: \"100%\",\n      color: \"white\",\n      backgroundColor: \"rgba(0.5, 0, 0, 0.5)\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, \"Set grid count:\", React.createElement(\"input\", {\n    style: {\n      width: 32,\n      marginLeft: 8\n    },\n    value: count,\n    onChange: event => setCount(Number(event.target.value)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }))));\n}\n\nfunction ConnectROSbridge() {\n  // Connecting to ROS websockets\n  var ros = new ROSLIB.Ros({\n    url: \"ws://robot.local:9090\"\n  });\n  ros.on(\"connection\", function () {\n    console.log(\"Connected to websocket server.\"); // create a listener\n\n    var Anchor0Listener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/anchor0\",\n      messageType: \"localizer_dwm1001/Anchor\"\n    });\n    var Anchor1Listener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/anchor1\",\n      messageType: \"localizer_dwm1001/Anchor\"\n    });\n    var Anchor2Listener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/anchor2\",\n      messageType: \"localizer_dwm1001/Anchor\"\n    });\n    var Anchor3Listener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/anchor3\",\n      messageType: \"localizer_dwm1001/Anchor\"\n    });\n    var tagListener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/tag\",\n      messageType: \"localizer_dwm1001/Tag\"\n    });\n    var IMUlistener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/imu/data\",\n      messageType: \"sensor_msgs/Imu\"\n    });\n    IMUlistener.subscribe(function (message) {\n      console.log(\"IMU: \" + message.orientation.x);\n      tagOrientation.x = message.orientation.x;\n      tagOrientation.y = message.orientation.y;\n      tagOrientation.z = message.orientation.z;\n      tagOrientation.w = message.orientation.w;\n    });\n    Anchor0Listener.subscribe(function (message) {\n      anchor0pos.x = 10 * message.x;\n      anchor0pos.y = 10 * message.y; // listener.unsubscribe();\n    });\n    Anchor1Listener.subscribe(function (message) {\n      anchor1pos.x = 10 * message.x;\n      anchor1pos.y = 10 * message.y; // listener.unsubscribe();\n    });\n    Anchor2Listener.subscribe(function (message) {\n      anchor2pos.x = 10 * message.x;\n      anchor2pos.y = 10 * message.y; // listener.unsubscribe();\n    });\n    Anchor3Listener.subscribe(function (message) {\n      anchor3pos.x = 10 * message.x;\n      anchor3pos.y = 10 * message.y; // listener.unsubscribe();\n    }); // subscribe to Tag topic\n\n    tagListener.subscribe(function (message) {\n      tagpos.x = 10 * message.x;\n      tagpos.y = 10 * message.y; // console.log(\n      //   \"Received message on \" +\n      //     tagListener.name +\n      //     \": \" +\n      //     tagpos.x +\n      //     \", \" +\n      //     tagpos.y\n      // );\n      // listener.unsubscribe();\n    });\n  });\n  ros.on(\"error\", function (error) {\n    console.log(\"Error connecting to websocket server: \", error);\n  });\n  ros.on(\"close\", function () {\n    console.log(\"Connection to websocket server closed.\");\n  });\n}\n\nConnectROSbridge();\nexport default App;","map":{"version":3,"sources":["/home/rodas/catkin_ws/src/autoROS/src/roscar_server/src/App.js"],"names":["useAnimationFrame","React","useState","ROSLIB","Worldview","Text","Lines","Cubes","Grid","Axes","anchor0pos","id","x","y","anchor1pos","anchor2pos","anchor3pos","tagpos","tagOrientation","z","w","App","count","setCount","validatedCount","isNaN","Math","round","newCount","lines","pose","position","orientation","scale","color","r","g","b","a","points","colors","labelMarkers","name","text","display","flexDirection","padding","left","top","right","maxWidth","backgroundColor","width","marginLeft","event","Number","target","value","ConnectROSbridge","ros","Ros","url","on","console","log","Anchor0Listener","Topic","messageType","Anchor1Listener","Anchor2Listener","Anchor3Listener","tagListener","IMUlistener","subscribe","message","error"],"mappings":"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","sourcesContent":["import { useAnimationFrame } from \"@cruise-automation/hooks\";\n\nimport React, { useState } from \"react\";\nimport ROSLIB from \"roslib\";\nimport Worldview, { Text, Lines, Cubes, Grid, Axes } from \"regl-worldview\";\n\nlet anchor0pos = { id: \"anchor0\", x: 0, y: 0 };\nlet anchor1pos = { id: \"anchor1\", x: 10, y: 0 };\nlet anchor2pos = { id: \"anchor2\", x: 10, y: 10 };\nlet anchor3pos = { id: \"anchor3\", x: 0, y: 10 };\nlet tagpos = { x: 5, y: 5 };\nlet tagOrientation = {x: 0, y: 0, z: 0, w: 0}\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  const validatedCount = isNaN(count) || count < 1 ? 6 : Math.round(count);\n  useAnimationFrame(\n    () => {\n      // update count before each browser repaint\n      const newCount = count + 1;\n      setCount(newCount);\n    },\n    false,\n    []\n  );\n\n  // lines\n  const lines = [\n    {\n      pose: {\n        position: { x: 0, y: 0, z: 0 },\n        orientation: { x: 0, y: 0, z: 0, w: 0 }\n      },\n      scale: { x: 0.1, y: 0.1, z: 0.1 },\n      color: { r: 0, g: 1, b: 0, a: 1 },\n      points: [\n        { x: anchor0pos.x, y: anchor0pos.y, z: 0 },\n        { x: tagpos.x, y: tagpos.y, z: 0 }\n      ],\n      colors: []\n    },\n    {\n      pose: {\n        position: { x: 0, y: 0, z: 0 },\n        orientation: { x: 0, y: 0, z: 0, w: 0 }\n      },\n      scale: { x: 0.1, y: 0.1, z: 0.1 },\n      color: { r: 0, g: 1, b: 0, a: 1 },\n      points: [\n        { x: anchor1pos.x, y: anchor1pos.y, z: 0 },\n        { x: tagpos.x, y: tagpos.y, z: 0 }\n      ],\n      colors: []\n    },\n    {\n      pose: {\n        position: { x: 0, y: 0, z: 0 },\n        orientation: { x: 0, y: 0, z: 0, w: 0 }\n      },\n      scale: { x: 0.1, y: 0.1, z: 0.1 },\n      color: { r: 0, g: 1, b: 0, a: 1 },\n      points: [\n        { x: anchor2pos.x, y: anchor2pos.y, z: 0 },\n        { x: tagpos.x, y: tagpos.y, z: 0 }\n      ],\n      colors: []\n    },\n    {\n      pose: {\n        position: { x: 0, y: 0, z: 0 },\n        orientation: { x: 0, y: 0, z: 0, w: 0 }\n      },\n      scale: { x: 0.1, y: 0.1, z: 0.1 },\n      color: { r: 0, g: 1, b: 0, a: 1 },\n      points: [\n        { x: anchor3pos.x, y: anchor3pos.y, z: 0 },\n        { x: tagpos.x, y: tagpos.y, z: 0 }\n      ],\n      colors: []\n    }\n  ];\n\n  const labelMarkers = [\n    {\n      name: anchor0pos.id,\n      text: anchor0pos.id,\n      color: { r: 1, g: 1, b: 1, a: 1 },\n      pose: {\n        orientation: { x: 0, y: 0, z: 0, w: 1 },\n        position: { x: anchor0pos.x, y: anchor0pos.y, z: 0, w: 1 }\n      },\n      scale: { x: 1, y: 1, z: 1 }\n      // uncomment colors and remove autoBackgroundColor prop to set text and background colors\n      // colors: [{ r: 1, g: 1, b: 1, a: 1 }, { r: 1, g: 0, b: 0, a: 0.8 }],\n    },\n    {\n      name: anchor1pos.id,\n      text: anchor1pos.id,\n      color: { r: 1, g: 1, b: 1, a: 1 },\n      pose: {\n        orientation: { x: 0, y: 0, z: 0, w: 1 },\n        position: { x: anchor1pos.x, y: anchor1pos.y, z: 0, w: 1 }\n      },\n      scale: { x: 1, y: 1, z: 1 }\n      // uncomment colors and remove autoBackgroundColor prop to set text and background colors\n      // colors: [{ r: 1, g: 1, b: 1, a: 1 }, { r: 1, g: 0, b: 0, a: 0.8 }],\n    },\n    {\n      name: anchor2pos.id,\n      text: anchor2pos.id,\n      color: { r: 1, g: 1, b: 1, a: 1 },\n      pose: {\n        orientation: { x: 0, y: 0, z: 0, w: 1 },\n        position: { x: anchor2pos.x, y: anchor2pos.y, z: 0, w: 1 }\n      },\n      scale: { x: 1, y: 1, z: 1 }\n      // uncomment colors and remove autoBackgroundColor prop to set text and background colors\n      // colors: [{ r: 1, g: 1, b: 1, a: 1 }, { r: 1, g: 0, b: 0, a: 0.8 }],\n    },\n    {\n      name: anchor3pos.id,\n      text: anchor3pos.id,\n      color: { r: 1, g: 1, b: 1, a: 1 },\n      pose: {\n        orientation: { x: 0, y: 0, z: 0, w: 1 },\n        position: { x: anchor3pos.x, y: anchor3pos.y, z: 0, w: 1 }\n      },\n      scale: { x: 1, y: 1, z: 1 }\n      // uncomment colors and remove autoBackgroundColor prop to set text and background colors\n      // colors: [{ r: 1, g: 1, b: 1, a: 1 }, { r: 1, g: 0, b: 0, a: 0.8 }],\n    }\n  ];\n\n  return (\n    <Worldview>\n      <Grid count={100} />\n      <Axes />\n      <Lines>{lines}</Lines>\n      <Text>{labelMarkers}</Text>\n      <Cubes>\n        {[\n          {\n            pose: {\n              orientation: { x: tagOrientation.x, y: 0, z: tagOrientation.z, w: tagOrientation.w },\n              // position the cube at the center\n              position: { x: tagpos.x, y: tagpos.y, z: 0 }\n            },\n            scale: { x: 1, y: 1, z: 1 },\n            // rgba values are between 0 and 1 (inclusive)\n            color: { r: 1, g: 0, b: 0, a: 1 }\n          }\n        ]}\n      </Cubes>\n\n      <Cubes>\n        {[\n          {\n            pose: {\n              orientation: { x: 0, y: 0, z: 0, w: 1 },\n              // position the cube at the center\n              position: { x: anchor0pos.x, y: anchor0pos.y, z: 0 }\n            },\n            scale: { x: 1, y: 1, z: 1 },\n            // rgba values are between 0 and 1 (inclusive)\n            color: { r: 0, g: 1, b: 0, a: 1 }\n          }\n        ]}\n      </Cubes>\n      <Cubes>\n        {[\n          {\n            pose: {\n              orientation: { x: 0, y: 0, z: 0, w: 1 },\n              // position the cube at the center\n              position: { x: anchor1pos.x, y: anchor1pos.y, z: 0 }\n            },\n            scale: { x: 1, y: 1, z: 1 },\n            // rgba values are between 0 and 1 (inclusive)\n            color: { r: 0, g: 1, b: 0, a: 1 }\n          }\n        ]}\n      </Cubes>\n      <Cubes>\n        {[\n          {\n            pose: {\n              orientation: { x: 0, y: 0, z: 0, w: 1 },\n              // position the cube at the center\n              position: { x: anchor2pos.x, y: anchor2pos.y, z: 0 }\n            },\n            scale: { x: 1, y: 1, z: 1 },\n            // rgba values are between 0 and 1 (inclusive)\n            color: { r: 0, g: 1, b: 0, a: 1 }\n          }\n        ]}\n      </Cubes>\n      <Cubes>\n        {[\n          {\n            pose: {\n              orientation: { x: 0, y: 0, z: 0, w: 1 },\n              // position the cube at the center\n              position: { x: anchor3pos.x, y: anchor3pos.y, z: 0 }\n            },\n            scale: { x: 1, y: 1, z: 1 },\n            // rgba values are between 0 and 1 (inclusive)\n            color: { r: 0, g: 1, b: 0, a: 1 }\n          }\n        ]}\n      </Cubes>\n      <div\n        style={{\n          position: \"absolute\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          padding: 8,\n          left: 0,\n          top: 0,\n          right: 0,\n          maxWidth: \"100%\",\n          color: \"white\",\n          backgroundColor: \"rgba(0.5, 0, 0, 0.5)\"\n        }}\n      >\n        <div>\n          Set grid count:\n          <input\n            style={{ width: 32, marginLeft: 8 }}\n            value={count}\n            onChange={event => setCount(Number(event.target.value))}\n          />\n        </div>\n      </div>\n    </Worldview>\n  );\n}\n\nfunction ConnectROSbridge() {\n  // Connecting to ROS websockets\n  var ros = new ROSLIB.Ros({\n    url: \"ws://robot.local:9090\"\n  });\n\n  ros.on(\"connection\", function() {\n    console.log(\"Connected to websocket server.\");\n\n    // create a listener\n    var Anchor0Listener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/anchor0\",\n      messageType: \"localizer_dwm1001/Anchor\"\n    });\n    var Anchor1Listener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/anchor1\",\n      messageType: \"localizer_dwm1001/Anchor\"\n    });\n    var Anchor2Listener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/anchor2\",\n      messageType: \"localizer_dwm1001/Anchor\"\n    });\n    var Anchor3Listener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/anchor3\",\n      messageType: \"localizer_dwm1001/Anchor\"\n    });\n    var tagListener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/dwm1001/tag\",\n      messageType: \"localizer_dwm1001/Tag\"\n    });\n\n    var IMUlistener = new ROSLIB.Topic({\n      ros: ros,\n      name: \"/imu/data\",\n      messageType: \"sensor_msgs/Imu\"\n    });\n\n    IMUlistener.subscribe(function(message) {\n      console.log(\"IMU: \" + message.orientation.x);\n      tagOrientation.x = message.orientation.x;\n      tagOrientation.y = message.orientation.y;\n      tagOrientation.z = message.orientation.z;\n      tagOrientation.w = message.orientation.w;\n\n    });\n\n    Anchor0Listener.subscribe(function(message) {\n      anchor0pos.x = 10 * message.x;\n      anchor0pos.y = 10 * message.y;\n      // listener.unsubscribe();\n    });\n\n    Anchor1Listener.subscribe(function(message) {\n      anchor1pos.x = 10 * message.x;\n      anchor1pos.y = 10 * message.y;\n      // listener.unsubscribe();\n    });\n\n    Anchor2Listener.subscribe(function(message) {\n      anchor2pos.x = 10 * message.x;\n      anchor2pos.y = 10 * message.y;\n      // listener.unsubscribe();\n    });\n\n    Anchor3Listener.subscribe(function(message) {\n      anchor3pos.x = 10 * message.x;\n      anchor3pos.y = 10 * message.y;\n      // listener.unsubscribe();\n    });\n\n    // subscribe to Tag topic\n    tagListener.subscribe(function(message) {\n      tagpos.x = 10 * message.x;\n      tagpos.y = 10 * message.y;\n      // console.log(\n      //   \"Received message on \" +\n      //     tagListener.name +\n      //     \": \" +\n      //     tagpos.x +\n      //     \", \" +\n      //     tagpos.y\n      // );\n\n      // listener.unsubscribe();\n    });\n  });\n\n  ros.on(\"error\", function(error) {\n    console.log(\"Error connecting to websocket server: \", error);\n  });\n\n  ros.on(\"close\", function() {\n    console.log(\"Connection to websocket server closed.\");\n  });\n}\nConnectROSbridge();\nexport default App;\n"]},"metadata":{},"sourceType":"module"}